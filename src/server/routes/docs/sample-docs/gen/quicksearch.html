<html>
<head>
</head>
<body style="background: transparent;">
    <script src="scripts/docstrap.lib.js"></script>
    <script src="scripts/lunr.min.js"></script>
    <script src="scripts/fulltext-search.js"></script>

    <script type="text/x-docstrap-searchdb">
    {"global.html":{"id":"global.html","title":"Global","body":" Documentation Classes IvirseIntegrationBuyerIvirseIntegrationOwnerPatientDataModel Global checkMigratingdefaultfetchUserfetchUserByAddressfetchUserWithPrivateKeygenAuthSignaturegetErrorMessagegetHttpStatusCodeisErrorStatusCodeisObjectlogErrorMessagemergeDeepRDMnemonicupdateMigrateStatusverifyAuthSignature Global Members &lt;abstract&gt; RDMnemonic Wallet Class. Methods &lt;async&gt; checkMigrating() Middleware to check the migration default() Callback to run when none of the others are matched. &lt;async&gt; fetchUser() Middleware to check user in database &lt;async&gt; fetchUserByAddress() Middleware to check user in database &lt;async&gt; fetchUserWithPrivateKey() Middleware to check user and user's private key genAuthSignature(signer) Parameters: Name Type Description signer ethers.Signer | ethers.Wallet Returns: { message: message, signature: signature address: address } Type Promise.&lt;object&gt; getErrorMessage(error) Extract an error stack or error message from an Error object. Parameters: Name Type Description error Error See: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error Returns: String representation of the error object. Type string getHttpStatusCode(options) Look for an error HTTP status code (in order of preference): Error object (status or statusCode) Express response object (statusCode) Falls back to a 500 (Internal Server Error) HTTP status code. Parameters: Name Type Description options Object Properties Name Type Description error Error response Object Express response object Returns: HTTP status code Type number isErrorStatusCode(statusCode) Determines if an HTTP status code falls in the 4xx or 5xx error ranges. Parameters: Name Type Description statusCode number HTTP status code Returns: Type boolean isObject(item) Simple object check. Parameters: Name Type Description item Returns: Type boolean logErrorMessage(error) Log an error message to stderr. Parameters: Name Type Description error string See: https://nodejs.org/dist/latest-v14.x/docs/api/console.html#console_console_error_data_args mergeDeep(target, sources) Deep merge two objects. Parameters: Name Type Description target sources &lt;async&gt; updateMigrateStatus() Update migration status verifyAuthSignature(authData, interval) Parameters: Name Type Description authData String example : {\"address\":\"0x55666165666A29D2C6F71B1324301b93036a0da3\",\"message\":\"{\"seed\":\"hDx3DcF5pGWR1JOHarSTPXxGZimpjUDH\",\"timestamp\":1660019049}\",\"signature\":\"0x4831934d502876064a29ac16a5efa0f984d4614ef9983607d3e5606780d405d37f17278560de8c191e40dfa0a48947c456cd7288dc3a109c8df3446da00495fd1c\"} interval number Returns: Type Object Type Definitions MigratedData key is id of data in sources system value is object with hashData(hash value of data) and metadataCid(cid of data in distributed storage) Type: Object Example { \"10085\": { \"hashData\": \"9050936d06705f834b54769150578c88069d507d\", \"metadataCid\": \"QmbhnaARiy64kzWoiHxtM1hi4ShJo9trQ43hwjbCEdQjYh\" }, \"10086\": { \"hashData\": \"fe1535d65accd13ebea58e263898c67729eb3d14\", \"metadataCid\": \"QmcX6pASA4ovH3npeKqnHN33sYvkYURyBRU2aVdaT8LKRc\" } } × Search results Close Documentation generated by JSDoc 3.6.11 on August 20th 2022, 11:00:19 am using the DocStrap template. "},"classes.list.html":{"id":"classes.list.html","title":"Classes","body":" Documentation Classes IvirseIntegrationBuyerIvirseIntegrationOwnerPatientDataModel Global checkMigratingdefaultfetchUserfetchUserByAddressfetchUserWithPrivateKeygenAuthSignaturegetErrorMessagegetHttpStatusCodeisErrorStatusCodeisObjectlogErrorMessagemergeDeepRDMnemonicupdateMigrateStatusverifyAuthSignature Classes Classes IvirseIntegrationBuyer IvirseIntegrationOwner PatientDataModel × Search results Close Documentation generated by JSDoc 3.6.11 on August 20th 2022, 11:00:19 am using the DocStrap template. "},"index.html":{"id":"index.html","title":"Index","body":" Documentation Classes IvirseIntegrationBuyerIvirseIntegrationOwnerPatientDataModel Global checkMigratingdefaultfetchUserfetchUserByAddressfetchUserWithPrivateKeygenAuthSignaturegetErrorMessagegetHttpStatusCodeisErrorStatusCodeisObjectlogErrorMessagemergeDeepRDMnemonicupdateMigrateStatusverifyAuthSignature Integration services JavaScript Library for integration the Ivirse system Get pack Run to package integration services lib yarn pack Requirements Install @ivirse-tovchain/core-services : README.md Install npm install @ivirse-tovchain/core-services --save npm install @ivirse-tovchain/integration-services --save or yarn add @ivirse-tovchain/core-services yarn add @ivirse-tovchain/integration-services Note: before publish lib to registry, to use integration services in apps : Git clone this project Go to core-services directory cd packages/core-services Pack core services npm pack Go to integration-services directory cd packages/integration-services Pack integration services npm pack Get installable package ivirse-tovchain-core-services-vx.x.x.tgz and ivirse-tovchain-integration-services-vx.x.x.tgz Run install ivirse-tovchain-core-services-vx.x.x.tgz and ivirse-tovchain-integration-services-vx.x.x.tgz npm install ivirse-tovchain-core-services-vx.x.x.tgz ivirse-tovchain-integration-services-vx.x.x.tgz --save Usage import IntegrationServices from \"@ivirse-tovchain/integration-services\"; console.log(IntegrationServices); // Output { IvirseIntegrationClient: { IvirseIntegrationOwner: [class IvirseIntegrationOwner extends ReactiveOwner], IvirseIntegrationBuyer: [class IvirseIntegrationBuyer extends ReactiveBuyer] }, IvirseIntegrationServer: [class IvirseIntegrationServer] } Develop Run RUN Integration Server Config .env file in folder : lib/integration-server/server/.env file Example : example.env Run server yarn start-server Note: require connect Isofh server to get user data Test Note: before run test check this doc : test/README.md yarn lint run just eslint yarn test run lint and tests Copyright &amp; License Copyright (c) 2013-2022 Ivirse Foundation - Released under the MIT license. × Search results Close Documentation generated by JSDoc 3.6.11 on August 20th 2022, 11:00:19 am using the DocStrap template. "},"IvirseIntegrationBuyer.html":{"id":"IvirseIntegrationBuyer.html","title":"Class: IvirseIntegrationBuyer","body":" Documentation Classes IvirseIntegrationBuyerIvirseIntegrationOwnerPatientDataModel Global checkMigratingdefaultfetchUserfetchUserByAddressfetchUserWithPrivateKeygenAuthSignaturegetErrorMessagegetHttpStatusCodeisErrorStatusCodeisObjectlogErrorMessagemergeDeepRDMnemonicupdateMigrateStatusverifyAuthSignature Class: IvirseIntegrationBuyer IvirseIntegrationBuyer Class for user as Buyer. Extend ReactiveBuyer from core services. Check ReactiveBuyer docs for more information new IvirseIntegrationBuyer() Example let provider = new ethers.providers.Web3Provider(window.ethereum, \"any\"); await provider.send(\"eth_requestAccounts\", []); const buyerSigner = provider.getSigner(); buyer = await IvirseIntegrationBuyer.init( buyerSigner, [rootCertificatePem], buyerStorageConfig, reactiveContractAddress, marketplaceContractAddress ); Extends ReactiveBuyer × Search results Close Documentation generated by JSDoc 3.6.11 on August 20th 2022, 11:00:19 am using the DocStrap template. "},"IvirseIntegrationOwner.html":{"id":"IvirseIntegrationOwner.html","title":"Class: IvirseIntegrationOwner","body":" Documentation Classes IvirseIntegrationBuyerIvirseIntegrationOwnerPatientDataModel Global checkMigratingdefaultfetchUserfetchUserByAddressfetchUserWithPrivateKeygenAuthSignaturegetErrorMessagegetHttpStatusCodeisErrorStatusCodeisObjectlogErrorMessagemergeDeepRDMnemonicupdateMigrateStatusverifyAuthSignature Class: IvirseIntegrationOwner IvirseIntegrationOwner Class for user as Owner. Extend ReactiveOwner from core services. Check ReactiveOwner docs for more information new IvirseIntegrationOwner(signer, storageService, verifyService, blockchainService, userToken, serverUrl) Create new IvirseIntegrationOwner Instance Parameters: Name Type Description signer ethers.Signer Signer instance. storageService IvirseStorageServices IvirseStorageServices instance. verifyService IvirseVerifyServices IvirseVerifyServices instance. blockchainService IvirseBlockchainServices DataSharingBlockchainServices instance. userToken string User access token. serverUrl string Integration Server URL. Example let provider = new ethers.providers.Web3Provider(window.ethereum, \"any\"); await provider.send(\"eth_requestAccounts\", []); const ownerSigner = provider.getSigner(); let owner = await IvirseIntegrationOwner.init(ownerSigner, [rootCertificatePem], ownerStorageConfig, reactiveContractAddress, marketplaceContractAddress, userToken, serverUrl ); Extends ReactiveOwner Methods &lt;async, static&gt; init(signer, rootCertificatePems, storageConfig, sharingContractAddress, marketContractAdress, userToken, serverUrl) Returns new IvirseIntegrationOwner Instance Parameters: Name Type Description signer ethers.Signer Ethers js Signer instance. rootCertificatePems Array.&lt;string&gt; Array of Pem formatted certificates. storageConfig StorageConfig Object representing the storage configuration. sharingContractAddress string Sharing Data Contract address. marketContractAdress string Marketplace Contract address. userToken string User access token. serverUrl string Integration Server URL. Returns: new IvirseIntegrationOwner instance. Type Promise.&lt;IvirseIntegrationOwner&gt; &lt;async&gt; getMigratedData() call integration server to get all migrated data require user token Returns: Type Promise.&lt;Array.&lt;MigratedData&gt;&gt; &lt;async&gt; getMigratedDataBySignature() call integration server to get all migrated data buy owner signature require request signature from user Returns: Type Promise.&lt;MigratedData&gt; &lt;async&gt; migrateData() call integration server to migrate new data of user Example let result = {message: 'Migrating'} &lt;async&gt; register() Register publick key to encrypt and address to integration server. Require new JWT login token to access api. Example let result = {message: 'success'} updateUserToken(userToken) Update new JWT token to access integration server Parameters: Name Type Description userToken &lt;async&gt; waitAllDataMigrated(timeout, awaitToRecheck) Wait to get all data migrated and get value Parameters: Name Type Default Description timeout 60 time to return (seconds); awaitToRecheck 1 time to recheck (seconds); Returns: Type Promise.&lt;MigratedData&gt; × Search results Close Documentation generated by JSDoc 3.6.11 on August 20th 2022, 11:00:19 am using the DocStrap template. "},"PatientDataModel.html":{"id":"PatientDataModel.html","title":"Class: PatientDataModel","body":" Documentation Classes IvirseIntegrationBuyerIvirseIntegrationOwnerPatientDataModel Global checkMigratingdefaultfetchUserfetchUserByAddressfetchUserWithPrivateKeygenAuthSignaturegetErrorMessagegetHttpStatusCodeisErrorStatusCodeisObjectlogErrorMessagemergeDeepRDMnemonicupdateMigrateStatusverifyAuthSignature Class: PatientDataModel PatientDataModel Define data model for storge in database new PatientDataModel() × Search results Close Documentation generated by JSDoc 3.6.11 on August 20th 2022, 11:00:19 am using the DocStrap template. "}}
    </script>

    <script type="text/javascript">
        $(document).ready(function() {
            Searcher.init();
        });

        $(window).on("message", function(msg) {
            var msgData = msg.originalEvent.data;

            if (msgData.msgid != "docstrap.quicksearch.start") {
                return;
            }

            var results = Searcher.search(msgData.searchTerms);

            window.parent.postMessage({"results": results, "msgid": "docstrap.quicksearch.done"}, "*");
        });
    </script>
</body>
</html>
